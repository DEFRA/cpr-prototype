{% set serviceName = "EPR for packaging data: manage your recycling obligation" %}

{% extends "layout.html" %}

{% block beforeContent %}
{{ govukBreadcrumbs({
  items: [
    {
      text: "Home",
      href: "https://defra-cpr-prototype.herokuapp.com/recycling obligation/s3/cs-sub-landing-page-s3"
    },
    {
      text: "Accept or reject PRNs and PERNS",
      href: ""
    }

  ]
}) }}
{% endblock %}

{% block pageTitle %}
    {{serviceName}} prototype
{% endblock %}
{% block content %}

<link rel="stylesheet" href="https://govuk-frontend.herokuapp.com/public/stylesheets/govuk-frontend-3.11.0.min.css">
    <script src="https://govuk-frontend.herokuapp.com/public/javascripts/govuk-frontend-3.11.0.min.js"></script>
   
    <script>
      document.addEventListener('DOMContentLoaded', function() {
          var selectAllButton = document.getElementById('select-all');
          var deselectAllButton = document.getElementById('deselect-all');

          selectAllButton.addEventListener('click', function() {
              var checkboxes = document.querySelectorAll('input[type="checkbox"]');
              checkboxes.forEach(function(checkbox) {
                  checkbox.checked = true;
              });
          });

          deselectAllButton.addEventListener('click', function() {
              var checkboxes = document.querySelectorAll('input[type="checkbox"]');
              checkboxes.forEach(function(checkbox) {
                  checkbox.checked = false;
              });
          });
      });
  </script>

  
<style>
  .responsive-table {
    width: 100%;
    border-collapse: collapse;
  }

  .responsive-table th, .responsive-table td {
    padding: 8px;
    text-align: left;
    border: 1px solid #ddd;
  }

  .responsive-table th {
    background-color: #ffffff;
  }

  @media screen and (max-width: 600px) {
    .responsive-table thead {
      display: none;
    }

    .responsive-table tr {
      display: block;
      margin-bottom: 10px;
    }

    .responsive-table td {
      display: block;
      text-align: right;
      border: none;
      position: relative;
      padding-left: 50%;
    }

    .responsive-table td::before {
      content: attr(data-label);
      position: absolute;
      left: 0;
      width: 50%;
      padding-left: 15px;
      font-weight: bold;
      text-align: left;
    }
  }
</style>


<div class="govuk-grid-row">
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">Accept or reject PRNs and PERNs</h1>
    </div>
  </div>
  <div class="govuk-grid-column-two-thirds">
    <form class="form" action="accept-bulk" method="POST">
      <p class="govuk-body">Select the PRNs and PERNs you want to accept. You can also review each one by opening it and selecting 'accept' or 'reject'.</p>
    </div>
  <div class="govuk-grid-column-one-third">
    <div class="gem-c-contextual-sidebar govuk-!-display-none-print">
      <div class="gem-c-related-navigation govuk-!-display-none-print" data-module="ga4-link-tracker" data-ga4-link-tracker-module-started="true">
      <h2 id="related-nav-related_items-34a8f55a" class="gem-c-related-navigation__main-heading">
        Related content
      </h2>
      <nav role="navigation" class="gem-c-related-navigation__nav-section" aria-labelledby="related-nav-related_items-34a8f55a" data-module="gem-toggle" data-gem-toggle-module-started="true">

  <ul class="govuk-list">
    <li>
      <a class="govuk-link" href="#">Download PRNs and PERNs in CSV or Excel file</a>
    </li>
    <li>
      <a class="govuk-link" href="#">Manage your recyling obligation</a>
    </li>
    <li>
      <a class="govuk-link" href="#">Search for PRNs or PERNs</a>
    </li>
  </ul>
</nav>

</div>
</div>

  </div>
</div>


<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <form class="form" action="accept-bulk" method="POST">
    <!--<h1 class="govuk-heading-xl">Accept or reject PRNs and PERNs</h1>
    <p class="govuk-body">Select the PRNs and PERNs you want to accept. You can also review each one by opening it and selecting 'accept' or 'reject'.</p>
    -->
  
      
    <hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">

   <!--Filter and sorting starts-->
  
   <div class="govuk-form-group" style="float:right; margin-bottom: 20px; margin-right: 10px;">
    <a href="#" class="govuk-link" style="margin-right: 10px;">Clear sort and filter</a>
    </div>
<!--<div class="govuk-form-group" style="float:right; margin-bottom: 20px;">
  <button class="govuk-button govuk-button--secondary" data-module="govuk-button" onclick="applyFilters()">Apply filters</button>
</div>-->

<div class="govuk-form-group" style="float:right">
    <label class="govuk-label" id="label1" for="select-filter">
      Filter by
    </label>
    <!--<div id="location-hint" class="govuk-hint">
        This can be different to where you went before
      </div>-->
    <select class="govuk-select" id="select-filter" name="filter" aria-labelledby="label1">
      <option selected>All materials</option>
    <option value="aluminium">Aluminium</option>
    <option value="glass-other">Glass other</option>
    <option value="glass-remelt">Glass re-melt</option>
    <option value="paper-board">Paper, board or fibre-based composite material</option>
    <option value="plastic">Plastic</option>
    <option value="steel">Steel</option>
    <option value="wood">Wood</option>
    </select>
</div>

    <div class="govuk-form-group" style="float:right">
      <label class="govuk-label" id="label2" for="select-sort">
        Sort by
      </label>
      <!--<div id="location-hint" class="govuk-hint">
        This can be different to where you went before
      </div>-->
  <select class="govuk-select" id="select-sort" name="sort" aria-labelledby="label2">
    <option value="date-issued-a">Date issued (newest first)</option>
    <option value="date-issued-b">Date issued (oldest first)</option>
    <option value="december-waste">December waste (yes to no)</option>
    <option value="date-issued-b">Issued by (A to Z)</option>
    <option value="date-issued-b">Issued by (Z to A)</option>
    <option value="tonnage-a">Tonnage (heaviest first)</option>
    <option value="tonnage-b">Tonnage (lightest first)</option>
  </select>
</div>
  
<!--Filter and sorting end-->

<!-----Responsive test-->


<div class="govuk-table-container">
  <table class="govuk-table responsive-table">
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-table__header" style="width: 15%;">PRN or PERN number</th>
        <th scope="col" class="govuk-table__header govuk-table__header--numeric">Material</th>
        <th scope="col" class="govuk-table__header govuk-table__header--numeric">Date issued</th>
        <th scope="col" class="govuk-table__header govuk-table__header--numeric">December waste</th>
        <th scope="col" class="govuk-table__header govuk-table__header--numeric">Issued by</th>
        <th scope="col" class="govuk-table__header govuk-table__header--numeric">Tonnage</th>
        <th scope="col" class="govuk-table__header" style="width: 13%;">Issuer note</th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">
      <tr class="govuk-table__row">
        <td class="govuk-table__cell" data-label="PRN or PERN number">
          <div class="govuk-checkboxes govuk-checkboxes--small">
            <div class="govuk-checkboxes__item">
              <input class="govuk-checkboxes__input" id="select-all" type="checkbox">
              <label class="govuk-label govuk-checkboxes__label" for="select-all">Select or unselect all PRNs and PERNs</label>
            </div>
          </div>
        </td>
        <td class="govuk-table__cell" data-label="Material"></td>
        <td class="govuk-table__cell" data-label="Date issued"></td>
        <td class="govuk-table__cell" data-label="December waste"></td>
        <td class="govuk-table__cell" data-label="Issued by"></td>
        <td class="govuk-table__cell" data-label="Tonnage"></td>
        <td class="govuk-table__cell" data-label="Issuer note"></td>
      </tr>
      <tr class="govuk-table__row">
        <td class="govuk-table__cell" data-label="PRN or PERN number">
          <div class="govuk-checkboxes govuk-checkboxes--small">
            <div class="govuk-checkboxes__item">
              <input class="govuk-checkboxes__input" id="waste-1" name="waste" type="checkbox" value="accept-bulk">
              <label class="govuk-label govuk-checkboxes__label" for="waste-1">
                <a href="selected-prn">ER454545540M</a>
              </label>
            </div>
          </div>
        </td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Material">Paper, board or fibre-based composite material</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Date issued">20 Nov 2025</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="December waste">No</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Issued by">XYZ Reprocessing</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Tonnage">65</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Issuer note">Purchase order number 34XFY68</td>
      </tr>
      <tr class="govuk-table__row">
        <td class="govuk-table__cell" data-label="PRN or PERN number">
          <div class="govuk-checkboxes govuk-checkboxes--small">
            <div class="govuk-checkboxes__item">
              <input class="govuk-checkboxes__input" id="waste-2" name="waste" type="checkbox" value="december-waste" onclick="checkItem(this)">
              <label class="govuk-label govuk-checkboxes__label" for="waste-2">
                <a href="prn-december-waste-selected">ER454545540M</a>
              </label>
            </div>
          </div>
        </td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Material">Paper, board or fibre-based composite material</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Date issued">01 Dec 2024</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="December waste">Yes</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Issued by">BYZ Reprocessor</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Tonnage">65</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Issuer note">Purchase order number 34XFY68</td>
      </tr>
      <tr class="govuk-table__row">
        <td class="govuk-table__cell" data-label="PRN or PERN number">
          <div class="govuk-checkboxes govuk-checkboxes--small">
            <div class="govuk-checkboxes__item">
              <input class="govuk-checkboxes__input" id="waste-3" name="waste" type="checkbox" value="view-awaiting-acceptance-alt-1">
              <label class="govuk-label govuk-checkboxes__label" for="waste-3">
                <a href="december-selected-prn">EX454545540M</a>
              </label>
            </div>
          </div>
        </td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Material">Paper, board or fibre-based composite material</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Date issued">20 Dec 2024</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="December waste">Yes</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Issued by">Exporting International</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Tonnage">151</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Issuer note">T2E reference 5689344....</td>
      </tr>
      <tr class="govuk-table__row">
        <td class="govuk-table__cell" data-label="PRN or PERN number">
          <div class="govuk-checkboxes govuk-checkboxes--small">
            <div class="govuk-checkboxes__item">
              <input class="govuk-checkboxes__input" id="waste-4" name="waste" type="checkbox" value="accept-bulk">
              <label class="govuk-label govuk-checkboxes__label" for="waste-4">
                <a href="aluminium">EX454545560M</a>
              </label>
            </div>
          </div>
        </td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Material">Aluminium</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="Date issued">01 Nov 2025</td>
        <td class="govuk-table__cell govuk-table__cell--numeric" data-label="December waste">No</td>
        <td class="govuk-table__cell govuk-table__cell
      

<!---Responsive end-->
            <nav class="moj-pagination" aria-label="Pagination navigation">

              <ul class="moj-pagination__list">
                <!--<li class="moj-pagination__item  moj-pagination__item--prev">
                  <a class="moj-pagination__link" href="">Previous<span class="govuk-visually-hidden"> page</span></a>
                </li>
            
                <li class="moj-pagination__item"><a class="moj-pagination__link" href="/page=1" aria-label="Page 1 of 45">1</a></li>-->
            
                <li class="moj-pagination__item moj-pagination__item--active" aria-label="Page 1 of 45" aria-current="page">1</li>
      
                <li class="moj-pagination__item"><a class="moj-pagination__link" href="" aria-label="Page 2 of 5">2</a></li>
              
            
                <li class="moj-pagination__item"><a class="moj-pagination__link" href="" aria-label="Page 3 of 5">3</a></li>
            
                <li class="moj-pagination__item moj-pagination__item--dots">…</li>
            
                <li class="moj-pagination__item"><a class="moj-pagination__link" href="" aria-label="Page 5 of 5">5</a></li>
            
                <li class="moj-pagination__item  moj-pagination__item--next">
                  <a class="moj-pagination__link" href="">Next<span class="govuk-visually-hidden"> page</span></a>
                </li>
              </ul>
              <p class="moj-pagination__results">Showing <b>1</b> to <b>10</b> of <b>45</b> PRNs and PERNs</p>
      
            </nav>
          
       
<br>

<br>
     
    <button class="govuk-button" formaction="accept-bulk">Accept selected PRNs and PERNs</button> <!--<button class=" govuk-button govuk-button--secondary" formaction="reject-bulk" style="margin-left: 20px;">Reject selected PRNs and PERNs</button>-->
</div>
<script src="https://govuk-frontend.herokuapp.com/public/javascripts/govuk-frontend-3.14.0.min.js"></script>

<body>
</form>

<!---X
<script>
  // Example data array
  const data = [
    { prn: 'ER454545540M', material: 'Paper, board or fibre-based composite material', date: '2025-11-20', waste: 'No', issuedBy: 'XYZ Reprocessing', tonnage: 65, issuer: 'Purchase order number 34XFY68' },
    { prn: 'ER454545540M', material: 'Aluminium', date: '2025-11-01', waste: 'No', issuedBy: 'Packaging reprocessing Ltd', tonnage: 65, issuer: 'Purchase order number 34XFY68' },
    { prn: 'EX3484743570M', material: 'Aluminium', date: '2025-11-20', waste: 'No', issuedBy: 'Exporting International', tonnage: 151, status: 'Accepted' },
    { prn: 'EX3484743570M', material: 'Paper, board or fibre-based composite material', date: '2024-12-20', waste: 'Yes', issuedBy: 'Packaging reprocessing Ltd', tonnage: 70, status: 'Accepted' },
    { prn: 'EX3484743570M', material: 'Wood', date: '2025-11-20', waste: 'No', issuedBy: 'Exporting International', tonnage: 100, status: 'Accepted' },
    { prn: 'EX3484743570M', material: 'Paper, board or fibre-based composite material', date: '2025-11-20', waste: 'No', issuedBy: 'XYZ Reprocessing', tonnage: 151, status: 'Accepted' },
    { prn: 'EX3484743570M', material: 'Paper, board or fibre-based composite material', date: '2025-11-20', waste: 'No', issuedBy: 'Exporting International', tonnage: 60, status: 'Accepted' },
    { prn: 'EX3484743570M', material: 'Plastic', date: '2024-12-20', waste: 'No', issuedBy: 'Packaging reprocessing Ltd', tonnage: 100, status: 'Rejected' },
    { prn: 'ER3484743570M', material: 'Glass', date: '2024-12-20', waste: 'No', issuedBy: 'Packaging reprocessing Ltd', tonnage: 70, status: 'Rejected' },
    { prn: 'EX3484743570M', material: 'Steel', date: '2024-12-20', waste: 'Yes', issuedBy: '	Packaging reprocessing Ltd', tonnage: 80, status: 'Cancelled' },

    // Add more data objects here
  ];

  function applyFilters() {
    const filter = document.getElementById('select-filter').value;
    const sort = document.getElementById('select-sort').value;

    let filteredData = data;

    // Apply filter
    if (filter !== 'Filter by') {
      filteredData = filteredData.filter(item => item.status.toLowerCase() === filter.toLowerCase());
    }

    // Apply sort
    if (sort !== 'Sort by') {
      filteredData.sort((a, b) => {
        if (sort === 'date-issued') {
          return new Date(a.date) - new Date(b.date);
        } else if (sort === 'tonnage') {
          return a.tonnage - b.tonnage;
        } else if (sort === 'material') {
          return a.material.localeCompare(b.material);
        }
      });
    }

    // Update table
    const tableBody = document.querySelector('.govuk-table__body');
    tableBody.innerHTML = ''; // Clear existing rows

    filteredData.forEach(item => {
      const row = document.createElement('tr');
      row.className = 'govuk-table__row';
      row.innerHTML = `
        <td class="govuk-table__cell"><a href="#">${item.prn}</a></td>
        <td class="govuk-table__cell">${item.material}</td>
        <td class="govuk-table__cell">${new Date(item.date).toLocaleDateString()}</td>
        <td class="govuk-table__cell">${item.waste}</td>
        <td class="govuk-table__cell">${item.tonnage}</td>
        <td class="govuk-table__cell"><strong class="govuk-tag govuk-tag--${getStatusClass(item.issuer)}">${item.issuer}</strong></td>
      `;
      tableBody.appendChild(row);
    });
  }

  function getStatusClass(issuer) {
    switch (issuer.toLowerCase()) {
      case 'accepted':
        return 'green';
      case 'awaiting acceptance':
        return 'grey';
      case 'rejected':
        return 'red';
      case 'cancelled':
        return 'yellow';
      default:
        return 'grey';
    }
  }

  document.getElementById('select-filter').addEventListener('change', applyFilters);
  document.getElementById('select-sort').addEventListener('change', applyFilters);
</script> -->




{% endblock %}
